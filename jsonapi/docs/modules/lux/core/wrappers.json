{"modified": "2014-11-11T17:40:26", "content_type": "text/html", "site": {"lux_version": "0.1.1-alpha.1", "template_engine": null, "year": 2014, "url": "http://quantmind.github.io/lux", "python_version": "3.4.2", "media": "/media", "date": "2014-11-11T17-40-20", "name": "Lux", "template": "doc.html"}, "html_url": "http://quantmind.github.io/lux/docs/modules/lux/core/wrappers", "head": {}, "name": "modules_lux_core_wrappers", "slug": "modules/lux/core/wrappers", "api_url": "http://quantmind.github.io/lux/jsonapi/docs/modules/lux/core/wrappers", "html": {"main": "<section id=\"page-header\" class=\"page-header-outer modules_lux_core_wrappers-header\">\n    <div class=\"layer\">\n        <div class=\"page-header\">\n            <div class=\"container fullpage\">\n                <div class=\"row fullpage\">\n                    <div class=\"col-sm-12 text-center\">\n                        <breadcrumbs></breadcrumbs>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div id=\"page-main\">\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"modules_lux_core_wrappers-main col-md-12\">\n                <div class=\"center-block\" style=\"max-width: 900px\" data-highlight data-hash-scroll>\n                    <h1>Source code for lux.core.wrappers</h1><div class=\"highlight\"><pre>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar</span> <span class=\"kn\">import</span> <span class=\"n\">get_event_loop</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.apps.wsgi</span> <span class=\"kn\">import</span> <span class=\"p\">(</span><span class=\"n\">route</span><span class=\"p\">,</span> <span class=\"n\">wsgi_request</span><span class=\"p\">,</span> <span class=\"n\">cached_property</span><span class=\"p\">,</span>\n                              <span class=\"n\">EnvironMixin</span><span class=\"p\">,</span> <span class=\"n\">html_factory</span><span class=\"p\">)</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.apps</span> <span class=\"kn\">import</span> <span class=\"n\">wsgi</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.apps.wsgi</span> <span class=\"kn\">import</span> <span class=\"n\">RouterParam</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.utils.httpurl</span> <span class=\"kn\">import</span> <span class=\"n\">JSON_CONTENT_TYPES</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pulsar.utils.structures</span> <span class=\"kn\">import</span> <span class=\"n\">mapping_iterator</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">lux.utils</span> <span class=\"kn\">import</span> <span class=\"n\">unique_tuple</span>\n\n<span class=\"n\">__all__</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">&#39;Html&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;WsgiRequest&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;Router&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;route&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;wsgi_request&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;as_tag&#39;</span><span class=\"p\">,</span>\n           <span class=\"s\">&#39;cached_property&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;EnvironMixin&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;html_factory&#39;</span><span class=\"p\">,</span>\n           <span class=\"s\">&#39;get_event_loop&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;RouterParam&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;JSON_CONTENT_TYPES&#39;</span><span class=\"p\">,</span>\n           <span class=\"s\">&#39;DEFAULT_CONTENT_TYPES&#39;</span><span class=\"p\">]</span>\n\n<span class=\"n\">Html</span> <span class=\"o\">=</span> <span class=\"n\">wsgi</span><span class=\"o\">.</span><span class=\"n\">Html</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">frozen_set</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">elems</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">_</span><span class=\"p\">():</span>\n        <span class=\"k\">for</span> <span class=\"n\">elem</span> <span class=\"ow\">in</span> <span class=\"n\">elems</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">elem</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n                <span class=\"k\">yield</span> <span class=\"n\">elem</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"k\">for</span> <span class=\"n\">el</span> <span class=\"ow\">in</span> <span class=\"n\">elem</span><span class=\"p\">:</span>\n                    <span class=\"k\">yield</span> <span class=\"n\">el</span>\n    <span class=\"k\">return</span> <span class=\"nb\">frozenset</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">())</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">as_tag</span><span class=\"p\">(</span><span class=\"n\">elem</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">elem</span><span class=\"p\">,</span> <span class=\"n\">wsgi</span><span class=\"o\">.</span><span class=\"n\">Html</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"n\">elem</span><span class=\"o\">.</span><span class=\"n\">tag</span> <span class=\"o\">!=</span> <span class=\"n\">tag</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"n\">Html</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"p\">,</span> <span class=\"n\">elem</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">elem</span>\n\n\n<span class=\"n\">DEFAULT_CONTENT_TYPES</span> <span class=\"o\">=</span> <span class=\"n\">unique_tuple</span><span class=\"p\">((</span><span class=\"s\">&#39;text/html&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;text/plain&#39;</span><span class=\"p\">,</span> <span class=\"s\">&#39;text/csv&#39;</span><span class=\"p\">),</span>\n                                     <span class=\"n\">JSON_CONTENT_TYPES</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"WsgiRequest\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">WsgiRequest</span><span class=\"p\">(</span><span class=\"n\">wsgi</span><span class=\"o\">.</span><span class=\"n\">WsgiRequest</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Extend pulsar :class:`~pulsar.apps.wsgi.wrappers.WsgiRequest` with</span>\n<span class=\"sd\">    additional methods and attributes.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"nd\">@property</span>\n<div class=\"viewcode-block\" id=\"WsgiRequest.app\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.app\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">app</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The :class:`.Application` running the website.&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">app</span>\n</div>\n    <span class=\"nd\">@property</span>\n<div class=\"viewcode-block\" id=\"WsgiRequest.config\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.config\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">config</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The :attr:`.Application.config` dictionary&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">config</span>\n</div>\n    <span class=\"nd\">@property</span>\n<div class=\"viewcode-block\" id=\"WsgiRequest.logger\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.logger\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">logger</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Shortcut to app logger&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">logger</span>\n</div>\n    <span class=\"nd\">@property</span>\n<div class=\"viewcode-block\" id=\"WsgiRequest.models\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.models\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">models</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The router to registered models for the application serving</span>\n<span class=\"sd\">        the request&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">cache</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">local</span><span class=\"o\">.</span><span class=\"n\">models</span>\n</div>\n    <span class=\"nd\">@cached_property</span>\n<div class=\"viewcode-block\" id=\"WsgiRequest.html_document\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.html_document\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">html_document</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The HTML document for this request.&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">html_document</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span>\n</div>\n    <span class=\"nd\">@cached_property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">cache_server</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">cache</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"p\">[</span><span class=\"s\">&#39;CACHE_SERVER&#39;</span><span class=\"p\">]</span>\n        <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">cache</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n            <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span>\n        <span class=\"k\">return</span> <span class=\"n\">cache</span>\n\n<div class=\"viewcode-block\" id=\"WsgiRequest.has_permission\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.WsgiRequest.has_permission\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">has_permission</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"p\">,</span> <span class=\"n\">model</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Check if this request has permission on ``model`` to perform a</span>\n<span class=\"sd\">        given ``action``&#39;&#39;&#39;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">app</span><span class=\"o\">.</span><span class=\"n\">permissions</span><span class=\"o\">.</span><span class=\"n\">has</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">action</span><span class=\"p\">,</span> <span class=\"n\">model</span><span class=\"p\">)</span>\n\n</div></div>\n<span class=\"n\">wsgi</span><span class=\"o\">.</span><span class=\"n\">set_wsgi_request_class</span><span class=\"p\">(</span><span class=\"n\">WsgiRequest</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"Router\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.Router\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Router</span><span class=\"p\">(</span><span class=\"n\">wsgi</span><span class=\"o\">.</span><span class=\"n\">Router</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Extend pulsar :class:`~pulsar.apps.wsgi.routers.Router` with content</span>\n<span class=\"sd\">    management.&#39;&#39;&#39;</span>\n    <span class=\"n\">in_nav</span> <span class=\"o\">=</span> <span class=\"bp\">False</span>\n    <span class=\"n\">content_manager</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n    <span class=\"n\">controller</span> <span class=\"o\">=</span> <span class=\"bp\">None</span>\n    <span class=\"n\">form</span> <span class=\"o\">=</span> <span class=\"n\">RouterParam</span><span class=\"p\">(</span><span class=\"bp\">None</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Router</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">__init__</span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">content_manager</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">content_manager</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">content_manager</span><span class=\"o\">.</span><span class=\"n\">_clone</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"Router.template_response\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.Router.template_response\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">template_response</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">template</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;A text/html response with an angular template</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">response</span>\n        <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">content_type</span> <span class=\"o\">=</span> <span class=\"s\">&#39;text/plain&#39;</span>\n        <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">content</span> <span class=\"o\">=</span> <span class=\"n\">template</span>\n        <span class=\"k\">return</span> <span class=\"n\">response</span>\n</div>\n<div class=\"viewcode-block\" id=\"Router.make_router\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.Router.make_router\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">make_router</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">rule</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Create a new :class:`.Router` form rule and parameters</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"n\">params</span><span class=\"o\">.</span><span class=\"n\">setdefault</span><span class=\"p\">(</span><span class=\"s\">&#39;cls&#39;</span><span class=\"p\">,</span> <span class=\"n\">Router</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Router</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">make_router</span><span class=\"p\">(</span><span class=\"n\">rule</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">params</span><span class=\"p\">)</span>\n</div>\n    <span class=\"k\">def</span> <span class=\"nf\">add_api_urls</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">api</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">r</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">routes</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">r</span><span class=\"p\">,</span> <span class=\"n\">Router</span><span class=\"p\">):</span>\n                <span class=\"n\">r</span><span class=\"o\">.</span><span class=\"n\">add_api_urls</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">api</span><span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"Router.get_api_info\"><a class=\"viewcode-back\" href=\"../../../api/core#lux.core.wrappers.Router.get_api_info\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">get_api_info</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">app</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;The api name for this :class:`.Router`</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n\n</div></div>\n<span class=\"k\">class</span> <span class=\"nc\">HeadMeta</span><span class=\"p\">(</span><span class=\"nb\">object</span><span class=\"p\">):</span>\n    <span class=\"sd\">&#39;&#39;&#39;Wrapper for HTML5 head metatags.</span>\n<span class=\"sd\">    &#39;&#39;&#39;</span>\n    <span class=\"k\">def</span> <span class=\"nf\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">head</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span> <span class=\"o\">=</span> <span class=\"n\">head</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__repr__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">repr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__str__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">update</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">iterable</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span> <span class=\"ow\">in</span> <span class=\"n\">mapping_iterator</span><span class=\"p\">(</span><span class=\"n\">iterable</span><span class=\"p\">):</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__setitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">content</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">set</span><span class=\"p\">(</span><span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">content</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__getitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">entry</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">entry</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__len__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">__iter__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">iter</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">meta</span><span class=\"o\">.</span><span class=\"n\">children</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">set</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">content</span><span class=\"p\">,</span> <span class=\"n\">meta_key</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&#39;&#39;&#39;Set the a meta tag with ``content`` and ``entry`` in the HTML5 head.</span>\n<span class=\"sd\">        The ``key`` for ``entry`` is either ``name`` or ``property`` depending</span>\n<span class=\"sd\">        on the value of ``entry``.</span>\n<span class=\"sd\">        &#39;&#39;&#39;</span>\n        <span class=\"k\">if</span> <span class=\"n\">content</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"n\">entry</span> <span class=\"o\">==</span> <span class=\"s\">&#39;title&#39;</span><span class=\"p\">:</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"n\">content</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">replace_meta</span><span class=\"p\">(</span><span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">content</span><span class=\"p\">,</span> <span class=\"n\">meta_key</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">get</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">meta_key</span><span class=\"o\">=</span><span class=\"bp\">None</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"n\">entry</span> <span class=\"o\">==</span> <span class=\"s\">&#39;title&#39;</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">title</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">head</span><span class=\"o\">.</span><span class=\"n\">get_meta</span><span class=\"p\">(</span><span class=\"n\">entry</span><span class=\"p\">,</span> <span class=\"n\">meta_key</span><span class=\"o\">=</span><span class=\"n\">meta_key</span><span class=\"p\">)</span>\n</pre></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class='small hidden-print text-muted' id='page-footer'>\n    <div class='container'>\n        <div class='row'>\n            <div class='block col-sm-5'>\n                <div class='hidden-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n                <div class='text-center visible-xs'>\n                    <ul class=\"fa-ul text-left\">\n    <li><i class=\"fa-li fa fa-copyright\"></i>2014 <a href=\"http://quantmind.com\">Quantmind</a></li>\n    <li>Site build with Lux on python 3.4.2</li>\n    <li>Docs build with <a href=\"http://sphinx-doc.org/\" target=\"_blank\">Sphinx</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/changelog\">Changelog</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/api/\">API</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/docs/EXTENSIONS/\">Extensions</a></li>\n    <li><a href=\"http://quantmind.github.io/lux/images\">Images</a></li>\n</ul>\n                </div>\n            </div>\n            <div class='block col-sm-2 text-center'>\n                <div class='hidden-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n                <div class='visible-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n            </div>\n            <div class='block col-sm-5'>\n                <div class='text-right hidden-xs'>\n                    <p><a href='https://twitter.com/quantmind' title='Follow quantmind on twitter'>\n<i class='fa fa-twitter fa-2x'></i></a>\n<a href='https://plus.google.com/+QuantmindPlus' title='Follow quantmind on google+'>\n<i class='fa fa-google-plus-square fa-2x'></i></a>\n<a href='https://www.facebook.com/quantmind' title='Follow quantmind on facebook'>\n<i class='fa fa-facebook-square fa-2x'></i></a>\n<a href='https://github.com/quantmind/lux' title='Lux on github'>\n<i class='fa fa-github fa-2x'></i></a></p>\n                </div>\n                <div class='text-center visible-xs'>\n                    <p><a href='#top' title=\"Lux\" class=\"hover-opacity\">\n    <img height=50 title='Lux' src='http://quantmind.github.io/lux/media/luxsite/lux.png' alt='Lux'>\n</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"}}